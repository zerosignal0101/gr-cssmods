id: cssmods_css_symbols
label: CSS Symbols
category: '[cssmods]'

templates:
  imports: from gnuradio import cssmods
  make: cssmods.css_symbols(${sf}, ${cr}, ${ldr})

#  Make one 'parameters' list entry for every parameter you want settable from the GUI.
#     Keys include:
#     * id (makes the value accessible as keyname, e.g. in the make entry)
#     * label (label shown in the GUI)
#     * dtype (e.g. int, float, complex, byte, short, xxx_vector, ...)
#     * default
parameters:
- id: sf
  label: Spreading Factor (SF)
  dtype: int
  default: 7
  options: [7, 8, 9, 10, 11, 12]
  option_labels: ['7', '8', '9', '10', '11', '12']
  
- id: cr
  label: Code Rate (CR)
  dtype: int
  default: 1
  options: [1, 2, 3, 4]
  option_labels: ['4/5', '4/6', '4/7', '4/8']
  
- id: ldr
  label: Low Data Rate (LDR)
  dtype: bool
  default: False

inputs:
- domain: message
  id: in
  label: in
  optional: false
outputs:
- domain: message
  id: out
  label: out
  optional: false
file_format: 1
documentation: |
  # LoRa CSS Symbols Block
  
  LoRa Physical Layer Encoding: Payload bytes to symbols.
  Implements padding, whitening, nibble extraction,
  diagonal interleaving, and Gray decoding based on Matlab code.
  Assumes Implicit Header and CRC.
  
  Parameters:
  - **Spreading Factor (SF)**: Determines the number of bits per symbol (7-12)
  - **Code Rate (CR)**: Error correction coding rate (1=4/5, 2=4/6, 3=4/7, 4=4/8)
  - **Low Data Rate (LDR)**: Boolean flag for low data rate optimization
  
  Input: Message containing payload bytes
  Output: Message containing encoded symbols